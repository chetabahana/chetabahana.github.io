{% assign my_asset_layout = my_asset.path | split: "/" | pop | join: "/" | append: "/" | append: my_asset.slug | replace: "_", "" | downcase %}{% assign my_layout_path = my_asset_layout | append: "/" %}{% assign my_childs = assets | where_exp:"item", "item.layout == my_asset_layout" | where_exp:"item", "item.path contains my_layout_path" %}{% if my_childs.size > 0 %}{% capture my_childs_output %}{% for my_child in my_childs %}{{ page.dir }}{% if page.dir %}{{ my_child.output }}{% else %}{{ my_child.content }}{% endif %}{% endfor %}{% endcapture %}{% else %}{% assign my_childs_output = my_asset.output %}{% endif %}